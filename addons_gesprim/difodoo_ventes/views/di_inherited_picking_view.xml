<?xml version="1.0" encoding="UTF-8"?>

<odoo>

    <data>
        <record id="di_view_picking_form" model="ir.ui.view">
            <field name="name">di.stock.picking.form</field>
            <field name="model">stock.picking</field>
            <field name="inherit_id" ref="stock.view_picking_form"/>
            <field eval="99" name="priority"/>
            <field name="arch" type="xml"> 
                                         
                <xpath expr="//field[@name='move_lines']/tree/field[@name='product_uom_qty'] " position="before">
                    <field name="di_flg_modif_uom"  invisible="1"/>
                    <field name="di_un_saisie" string="Unité saisie"/>
                    <field name="di_qte_un_saisie" string="Qté un. saisie"/>
                    <field name="di_tare"  string="Tare"/>
                    <field name="di_poib"  string="Poids brut"/>                                                    
                </xpath>
                <xpath expr="//field[@name='move_lines']/tree/field[@name='product_uom_qty'] " position="after">
                    <field name="di_product_packaging_id"  string="Colis" attrs="{'invisible': [('product_id', '=', False)],'required':[('di_un_saisie','=','COLIS')]}" context="{'default_product_id': product_id, 'tree_view_ref':'product.product_packaging_tree_view', 'form_view_ref':'product.product_packaging_form_view'}" domain="[('product_id','=',product_id),('di_type_cond','=','COLIS')]" groups="product.group_stock_packaging" />
                    <field name="di_type_palette_id"  attrs="{'invisible': [('product_id', '=', False)],'required':[('di_un_saisie','=','PALETTE')]}" context="{'default_product_id': product_id, 'tree_view_ref':'product.product_packaging_tree_view', 'form_view_ref':'product.product_packaging_form_view'}" domain="[('product_id','=',product_id),('di_type_cond','=','PALETTE')]" groups="product.group_stock_packaging"/>                                    
                    <field name="di_nb_pieces" readonly="1" string="Nb pièces"/>
                    <field name="di_nb_colis" readonly="1" string="Nb colis"/>
                    <field name="di_nb_palette" readonly="1" string="Nb palette"/>
                    <field name="di_poin" readonly="1" string="Poids net"/>                                                            
                </xpath>                                         
            </field>                                    
        </record> 
        <record id="di_view_stock_move_operations" model="ir.ui.view">
            <field name="name">di.stock.move.operations.form</field>
            <field name="model">stock.move</field>
            <field name="inherit_id" ref="stock.view_stock_move_operations"/>
            <field eval="99" name="priority"/>
            <field name="arch" type="xml">
                            
                <xpath expr="//label[@for='product_uom_qty']" position="before">                    
                    <field name="di_un_saisie_init" readonly="1" string="Unité de saisie initiale" />
                    <field name="di_qte_un_saisie_init" readonly="1"   string="Qté initiale un.saisie"/>
                    <!-- <field name="di_tare_init" readonly="1"  string="Tare initiale"/>
                    <field name="di_poib_init" readonly="1"  string="Poids brut initial"/>                                                              
                    <field name="di_product_packaging_init_id" readonly="1"   string = "Colis initial" attrs="{'invisible': [('product_id', '=', False)],'required':[('di_un_saisie_init','=','COLIS')]}" context="{'default_product_id': product_id, 'tree_view_ref':'product.product_packaging_tree_view', 'form_view_ref':'product.product_packaging_form_view'}" domain="[('product_id','=',product_id),('di_type_cond','=','COLIS')]" groups="product.group_stock_packaging"/>
                    <field name="di_type_palette_init_id" readonly="1"   string = "Palette initiale" attrs="{'invisible': [('product_id', '=', False)],'required':[('di_un_saisie_init','=','PALETTE')]}" context="{'default_product_id': product_id, 'tree_view_ref':'product.product_packaging_tree_view', 'form_view_ref':'product.product_packaging_form_view'}" domain="[('product_id','=',product_id),('di_type_cond','=','PALETTE')]" groups="product.group_stock_packaging"/>                                    
                    <field name="di_nb_pieces_init" readonly="1" string="Nb pièces initial"/>
                    <field name="di_nb_colis_init" readonly="1" string="Nb colis initial"/>
                    <field name="di_nb_palette_init" readonly="1" string="Nb palettes initial"/>
                    <field name="di_poin_init" readonly="1" string="Poids net initial"/>                     -->
                </xpath>
                <xpath expr="//label[@for='quantity_done']" position="before">
                    <field name="di_flg_modif_uom"  invisible="1"/>
                    <field name="di_un_saisie" />
                    <field name="di_qte_un_saisie"  string="Qté un. saisie"/>
                    <field name="di_product_packaging_id" invisible="1"/>
                    <field name="di_type_palette_id" invisible="1"/>
                    <field name="di_poib" invisible="1"/>
                    <field name="di_tare" invisible="1"/>
                    <!-- <field name="move_id" invisible="1"/>
                    <field name="di_tare"  string="Tare"/>
                    <field name="di_poib" string="Poids brut"/>    
                    <field name="di_product_packaging_id"  string = "Colis" attrs="{'invisible': [('product_id', '=', False)],'required':[('di_un_saisie','=','COLIS')]}" context="{'default_product_id': product_id, 'tree_view_ref':'product.product_packaging_tree_view', 'form_view_ref':'product.product_packaging_form_view'}" domain="[('product_id','=',product_id),('di_type_cond','=','COLIS')]" groups="product.group_stock_packaging"/>
                    <field name="di_type_palette_id"  attrs="{'invisible': [('product_id', '=', False)],'required':[('di_un_saisie','=','PALETTE')]}" context="{'default_product_id': product_id, 'tree_view_ref':'product.product_packaging_tree_view', 'form_view_ref':'product.product_packaging_form_view'}" domain="[('product_id','=',product_id),('di_type_cond','=','PALETTE')]" groups="product.group_stock_packaging"/>                                    
                    <field name="di_nb_pieces" readonly="1" string="Nb pièces"/>
                    <field name="di_nb_colis" readonly="1" string="Nb colis"/>
                    <field name="di_nb_palette" readonly="1" string="Nb palettes"/>
                    <field name="di_poin" readonly="1" string="Poids net"/>                                                       -->
                </xpath>
                <!-- <xpath expr="//field[@name='move_line_ids']" position="inside">
                    <tree editable="bottom">                        
                        <field name="lot_id" />
                        <field name="product_uom_qty" readonly="1"/>
                        <field name="di_qte_un_saisie" />                                                                                                            
                        <field name="qty_done" />
                        <field name="product_uom_id" readonly="1" force_save="1"/>  
                        <field name="location_id" invisible="1"/>                          
                        <field name="product_id" invisible="1"/>                        
                        <field name="in_entire_package" invisible="1"/>                        
                        <field name="package_id" invisible="1"/>                        
                        <field name="location_dest_id" invisible="1"/>
                        <field name="result_package_id" invisible="1" />
                        <field name="lots_visible" invisible="1"/>
                        <field name="owner_id" invisible="1"/>
                        <field name="state" invisible="1"/>                        
                        <field name="lot_name" invisible="1"/>
                        <field name="is_initial_demand_editable" invisible="1"/>                        
                        <field name="is_locked" invisible="1"/>
                                            
                    </tree>                                                                
                </xpath>     
                                     
                
                <xpath expr="//field[@name='qty_done']" position="before">
                    <field name="di_qte_un_saisie" />  
                </xpath> -->
                                                  
            </field>                                    
        </record> 
        <record id="di_stock_move_line_operations_tree" model="ir.ui.view">
            <field name="name">di.stock.move.line.operations.tree</field>
            <field name="model">stock.move.line</field>
            <field name="inherit_id" ref="stock.view_stock_move_line_operation_tree"/>
            <field eval="99" name="priority"/>
            <field name="arch" type="xml">
                            
                <xpath expr="//field[@name='qty_done']" position="before">
                    <field name="di_qte_un_saisie" />  
                </xpath>
                                                  
            </field>                                    
        </record>               
    </data>
 
</odoo>   
